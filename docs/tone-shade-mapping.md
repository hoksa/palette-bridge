# M3 Tone to Tailwind Shade Mapping

This document describes the foundational logic that maps Material Design 3 tonal palette values to Tailwind CSS shade names. This mapping drives every default role assignment in `src/data/contrast-shifts.ts`.

## The core correspondence

M3's tonal palette uses a 0–100 lightness scale where 0 is black and 100 is white. Tailwind uses numeric shade labels (50–950) where higher numbers are darker. The two scales run in opposite directions at roughly proportional intervals.

The mapping treats them as positional mirrors — a tone's "distance from white" in M3 corresponds to a shade's "distance from the light end" in Tailwind:

| M3 Tone | Tailwind Shade | Reasoning |
|---------|---------------|-----------|
| 0       | black / 950   | Absolute dark end of both scales |
| 10      | 900           | 90% from white ≈ 90% through shade scale |
| 20      | 800           | 80% from white ≈ 80% through shade scale |
| 30      | 700           | 70% from white |
| 40      | 600           | 60% from white |
| 50      | 500           | Midpoint of both scales |
| 60      | 400           | 40% from white |
| 70      | 300           | 30% from white |
| 80      | 200           | 20% from white |
| 90      | 100           | 10% from white |
| 95      | 50            | Near-white end of both scales |
| 100     | white         | Absolute light end of both scales |

**This is a positional correspondence, not a measured lightness match.** Nobody verified that, say, Tailwind blue-600 has the same perceptual lightness as M3 tone 40. The assumption is that a well-constructed Tailwind palette has shades that darken in roughly even steps, so positional equivalence is close enough for a useful starting point.

## How default role assignments are derived

M3 specifies a tone value for every color role at every contrast level. These tone values come from `ContrastCurve(low, normal, medium, high)` objects in the M3 source code, which define target contrast ratios that resolve to specific tones.

The default assignments in `contrast-shifts.ts` were produced by:

1. Looking up the M3 tone for each role/contrast/theme combination
2. Converting that tone to a Tailwind shade using the table above
3. Hardcoding the resulting shade name into the lookup tables

### Accent roles (primary, secondary, tertiary, error)

All four accent families follow the same pattern.

**Light theme:**

| Role | Standard | Medium | High |
|------|----------|--------|------|
| X (e.g. primary) | tone 40 → shade 600 | tone ~30 → shade 700 | tone ~30 → shade 700 |
| onX | tone 100 → white | tone 100 → white | tone 100 → white |
| XContainer | tone 90 → shade 100 | tone ~85 → shade 200 | tone ~80 → shade 200 |
| onXContainer | tone 30 → shade 700 | tone ~25 → shade 800 | tone ~17 → shade 900 |

**Dark theme:**

| Role | Standard | Medium | High |
|------|----------|--------|------|
| X | tone 80 → shade 200 | tone ~85 → shade 100 | tone ~85 → shade 100 |
| onX | tone 20 → shade 800 | tone ~15 → shade 900 | tone 0 → shade 950 |
| XContainer | tone 30 → shade 700 | tone ~35 → shade 700 | tone ~40 → shade 600 |
| onXContainer | tone 90 → shade 100 | tone ~93 → shade 50 | tone ~97 → shade 50 |

### Surface/neutral roles

Surface containers have direct tone values at each contrast level (no contrast-ratio calculation). These tones often fall between standard Tailwind shade steps:

| Role | Light tones (std/med/high) | Dark tones (std/med/high) |
|------|---------------------------|---------------------------|
| surfaceDim | 87/80/75 | 6 (fixed) |
| surfaceBright | 98 (fixed) | 24/29/34 |
| surfaceContainerLowest | 100 (fixed) | 4/2/0 |
| surfaceContainerLow | 96/96/95 | 10/11/12 |
| surfaceContainer | 94/92/90 | 12/16/20 |
| surfaceContainerHigh | 92/88/85 | 17/21/25 |
| surfaceContainerHighest | 90/84/80 | 22/26/30 |

Because many of these tones (87, 92, 94, etc.) have no direct Tailwind shade equivalent, each is rounded to the nearest shade. For example, tone 92 rounds to shade 100 (tone 90's equivalent). The OKLCH interpolation feature exists to generate these in-between shades when more precision is needed.

## Contrast level pattern

Higher contrast increases the gap between foreground and background:

- **Foreground ("on") roles** push toward extremes — darker shades in light mode, lighter in dark mode
- **Background/container roles** stay relatively stable or shift slightly
- **Some surface roles** reach absolute extremes at high contrast (e.g. `onSurface` light: 900 → 950 → black)

## Limitations and assumptions

- **Approximate, not exact.** Tailwind shades were not generated by M3's HCT algorithm. The perceptual lightness of Tailwind shade 600 does not precisely equal M3 tone 40 — it's "close enough" because both represent a similar position in their respective scales.
- **Intermediate tones round to nearest shade.** M3 tones like 85, 87, 92 get mapped to the closest available Tailwind shade (200, 200, 100 respectively). This loses some of M3's fine-grained tonal distinctions, especially for surface containers.
- **Palette quality matters.** This mapping assumes the input palette has shades that darken in roughly even perceptual steps. Poorly constructed palettes (e.g. with uneven lightness jumps) will produce worse results.
- **All defaults are overridable.** Every assignment can be changed by the user in the UI. These defaults are a starting point informed by M3's spec, not an authoritative output.

## Mutability

This mapping can and should be refined if better correspondences are found. It is codified as a reference point, not as a permanent constraint. Changes should be made in `src/data/contrast-shifts.ts` and this document updated to match.
